{% extends "base/base.html" %}

{% block content %}
<div class="page-container">
  <h2>My Requests</h2>

  <table class="sn-list">
    <thead>
      <tr>
        <th>Number</th>
        <th>Short Description</th>
        <th>Status</th>
        <th>Estimated Cost</th>
        <th>Created</th>
      </tr>
    </thead>

    <tbody>
    {% if requests %}
      {% for req in requests %}
        <tr onclick="window.location.href='/requests/{{ req.request_id }}/'">
          <td>{{ req.request_id }}</td>
          <td>{{ req.title }}</td>
          <td>
            <span class="status-badge status-{{ req.status|lower }}">
              {{ req.get_status_display }}
            </span>
          </td>
          <td>
            {% if req.estimated_cost %}
              ₹{{ req.estimated_cost }}
            {% else %}
              –
            {% endif %}
          </td>
          <td>{{ req.created_at|date:"d M Y" }}</td>
        </tr>
      {% empty %}
        <tr>
          <td colspan="5">No requests found</td>
        </tr>
      {% endfor %}

      {% endif %}

    </tbody>
  </table>
</div>
{% endblock %}
